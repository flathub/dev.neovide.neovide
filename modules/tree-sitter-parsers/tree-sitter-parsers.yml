name: tree-sitter-parsers
modules:
  - name: tree-sitter-bash
    buildsystem: simple
    build-commands:
      - mkdir -p /app/lib/nvim/parser
      - cc -shared -fPIC src/parser.c -I src -o /app/lib/nvim/parser/bash.so
    sources:
      - type: archive
        url: https://github.com/tree-sitter/tree-sitter-bash/archive/v0.25.0.tar.gz
        sha256: 9d6bad618e712b51ff060515b0ce6872e33727148f35becb8aa3ad80044c2348

  - name: tree-sitter-c
    buildsystem: simple
    build-commands:
      - mkdir -p /app/lib/nvim/parser
      - cc -shared -fPIC src/parser.c -I src -o /app/lib/nvim/parser/c.so
    sources:
      - type: archive
        url: https://github.com/tree-sitter/tree-sitter-c/archive/v0.24.1.tar.gz
        sha256: 25dd4bb3dec770769a407e0fc803f424ce02c494a56ce95fedc525316dcf9b48

  - name: tree-sitter-lua
    buildsystem: simple
    build-commands:
      - mkdir -p /app/lib/nvim/parser
      - cc -shared -fPIC src/parser.c src/scanner.c -I src -o /app/lib/nvim/parser/lua.so
    sources:
      - type: archive
        url: https://github.com/tree-sitter-grammars/tree-sitter-lua/archive/v0.4.0.tar.gz
        sha256: b0977aced4a63bb75f26725787e047b8f5f4a092712c840ea7070765d4049559

  - name: tree-sitter-markdown
    buildsystem: simple
    build-commands:
      - mkdir -p /app/lib/nvim/parser
      - cc -shared -fPIC tree-sitter-markdown/src/parser.c tree-sitter-markdown/src/scanner.c
        -I tree-sitter-markdown/src -o /app/lib/nvim/parser/markdown.so
      - cc -shared -fPIC tree-sitter-markdown-inline/src/parser.c tree-sitter-markdown-inline/src/scanner.c
        -I tree-sitter-markdown-inline/src -o /app/lib/nvim/parser/markdown_inline.so
    sources:
      - type: archive
        url: https://github.com/tree-sitter-grammars/tree-sitter-markdown/archive/v0.5.1.tar.gz
        sha256: acaffe5a54b4890f1a082ad6b309b600b792e93fc6ee2903d022257d5b15e216

  - name: tree-sitter-python
    buildsystem: simple
    build-commands:
      - mkdir -p /app/lib/nvim/parser
      - cc -shared -fPIC src/parser.c src/scanner.c -I src -o /app/lib/nvim/parser/python.so
    sources:
      - type: archive
        url: https://github.com/tree-sitter/tree-sitter-python/archive/v0.25.0.tar.gz
        sha256: 4609a3665a620e117acf795ff01b9e965880f81745f287a16336f4ca86cf270c

  - name: tree-sitter-query
    buildsystem: simple
    build-commands:
      - mkdir -p /app/lib/nvim/parser
      - cc -shared -fPIC src/parser.c -I src -o /app/lib/nvim/parser/query.so
    sources:
      - type: archive
        url: https://github.com/nvim-treesitter/tree-sitter-query/archive/v0.7.0.tar.gz
        sha256: 79285847e8350ee9fe1f6f6c9eb64bc14320f70f7b9b65037193fc58f2638613

  - name: tree-sitter-vim
    buildsystem: simple
    build-commands:
      - mkdir -p /app/lib/nvim/parser
      - cc -shared -fPIC src/parser.c src/scanner.c -I src -o /app/lib/nvim/parser/vim.so
    sources:
      - type: archive
        url: https://github.com/tree-sitter-grammars/tree-sitter-vim/archive/v0.7.0.tar.gz
        sha256: 44eabc31127c4feacda19f2a05a5788272128ff561ce01093a8b7a53aadcc7b2

  - name: tree-sitter-vimdoc
    buildsystem: simple
    build-commands:
      - mkdir -p /app/lib/nvim/parser
      - cc -shared -fPIC src/parser.c -I src -o /app/lib/nvim/parser/vimdoc.so
    sources:
      - type: archive
        url: https://github.com/neovim/tree-sitter-vimdoc/archive/v4.0.0.tar.gz
        sha256: 8096794c0f090b2d74b7bff94548ac1be3285b929ec74f839bd9b3ff4f4c6a0b
